<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>chorme_game</title>
</head>
<body>
	<div class="game-body" id="a" style="background: #fff;">
		<canvas id="canvas" style="margin: 0 auto;display: block;border: 1px solid #ccc;margin-top: 200px;"></canvas>
	</div>
	<div style="display: none">
		<img src="./assets/sprite.png" alt="" id="sprite">
		<img src="./assets/2x@sprite.png" alt="" id="2x@sprite">
	</div>
	<script src="js/config.js"></script>
	<script src="js/utils.js"></script>
	<script src="js/HorizonLine.js"></script>
	<script src="js/Cloud.js"></script>
	<script src="js/NightMode.js"></script>
	<script src="js/Obstacle.js"></script>
	<script>
		window.onload = function () {
			const HORIZON = {x: 2, y: 54}
			var H = new HorizonLine(HORIZON);
			var C = new Cloud(spriteDefinition.CLOUD);
			var N = new NightMode(spriteDefinition.MOON);
			var startTime = 0;
			var num = 0;
			var t = 0
			var deltaTime;
			(function draw(time) {
				num++
				if(num === 60){
					num = 0
					t++
				}
				H.ctx.clearRect(0,0,600,150);
				time = time || 0;
				deltaTime = time - startTime;
				if(t !== 0 && t % 10 === 0){NIGHT_START = true}
				H.update(deltaTime, 3);
				C.updateClouds(0.2);
				N.invert(deltaTime);
				startTime = time;
				window.requestAnimationFrame(draw);
			})();
		};
	</script>

	<style>
		 .game-body{
	     transition:filter 1.5s cubic-bezier(0.65, 0.05, 0.36, 1), background-color 1.5s cubic-bezier(0.65, 0.05, 0.36, 1);
	     /*告诉浏览器即将对某元素执行什么动画，这样浏览器可以提前进行准备来优化动画效果，使动画更为流畅*/
	     will-change: filter,background-color;
		 }
		  .inverted{
			  filter: invert(100%); /*反色*/
        background-color: #000; /*改变背景为黑色(入夜效果)*/
	    }
	</style>
</body>
</html>
